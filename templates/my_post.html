{% extends  "base.html" %} {% block title %} HOME {% endblock %}
{% block content%}
<style>
    .profile_img{
      width: 50px;
      height: 50px;
      border-radius: 500px;
    }
    .post_image{
      width: 500px;
      height: 500px;
    }
  </style>

{% if "user_id" in session %}
<h1>Hello {{session["user_id"]}}</h1>

{% endif %}

{% if "user_name" in session %}
<h1>Hello {{session["user_name"]}}</h1>

{% endif %}


<div class="shadow p-3 mb-5 bg-body rounded">

  <ul class="list-group list-group-flush" id="notes">
    {% for note in notes %}
    <li class="list-group-item">
      
        <strong> <img src="{{url_for('static', filename='images/'+note.poster.profile_pic)}}"   class="profile_img" alt="img error">{{note.poster.user_name}}</strong>
        
        <p> <b>Your Post:</b> 
          {{ note.post }}</p>

          {{note.likes |length}}
         


          {%if current_user.id in note.likes|map(attribute="user_id")|list%}
          <a href="#"onClick="like ( {{ note.id }} )"  role="button" data-bs-toggle="button"><i class="fa-solid fa-thumbs-up" ></i></a>
          {%else%}
          <a href="#"onClick="like ( {{ note.id }} )"  role="button" data-bs-toggle="button"><i class="fa-regular fa-thumbs-up"></i></a>
          
          {%endif%}
      {% if note.poster.id == current_user.id%}
      <button type="button" class="btn-close" onClick="deleteNote ( {{ note.id }} )">
        <span aria-hidden="true">&times;</span>
      </button>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
  </div>



  <div class="shadow p-3 mb-5 bg-body rounded">

    <ul class="list-group list-group-flush" id="notes">
      {% for image in images %}
      <li class="list-group-item">
        
        <strong> <img src="{{url_for('static', filename='images/'+image.img_poster.profile_pic)}}"   class="profile_img" alt="img error"> {{image.img_poster.user_name}}</strong>
          
          <p> <b>Post:</b> 
            <img src="{{url_for('static', filename='images/post/'+image.img_name)}}"   class="post_image" alt="img error">
            <h1>caption:
              {{image.caption}}</h1>
          </p>
          <div class="Like">
            {{image.likes |length}}
           
  
  
            {%if current_user.id in image.likes|map(attribute="user_id")|list%}
            <a href="#"onClick=" img_like ( {{ image.id }} )"  role="button" data-bs-toggle="button"><i class="fa-solid fa-thumbs-up" ></i></a
            {%else%}
            <a href="#"onClick=" img_like ( {{ image.id }} )"  role="button" data-bs-toggle="button"><i class="fa-regular fa-thumbs-up"></i></a
            
            {%endif%}
          </div>
        {% if image.img_poster.id == session["user_id"] or session["user_id"] == 1%}
        <button type="button" class="close" onClick="deleteImg ( {{ image.id }} )">
          <span aria-hidden="true">&times;</span>
        </button>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
    </div>

  {% endblock %} 